############################
#
# Endtimes Crisis Events
#
# Written by BowlerHatGuy
#
############################

# Naming Scheme
# PSNN = [PRIMARY][SUBTYPE][NUMBER][NUMBER] 
# Subtypes:
# 0 = hidden
# 1 = basic text box
# 2 = catch event (default states and when players think thye are clever)
# 3 = diplomatic
# 4-9 = utility
# Note: Number 00 is unused

namespace = endtimescrisis

### THE FAULT IN THE STARS

### Triggering Event
# Notice: Meta-crisis may have side effects including depression, mass suicide, and universal destruction. Use only as advised.

country_event = {
	id = endtimescrisis.404
	hide_window = yes
	
	trigger = { always = no }
	
	immediate = {
		endgame_telemetry = vultaum
		country_event = { id = endtimescrisis.4001 days = 10 }
	}
}

### PRELUDE
# Initializes the chain and distributes events to all empires (HIDDEN)
country_event = {
	id = endtimescrisis.4001
	hide_window = yes
	fire_only_once = yes
	
	is_triggered_only = yes
	
	immediate = {
		endgame_telemetry = vultaum
		set_global_flag = endtimes_vultaum_shifting_stars
		set_global_flag = endtimes_vultaum_crisis_happened
		set_global_flag = galactic_crisis_happened
		every_country = {
			limit = { is_country_type = default }
			country_event = { id = endtimescrisis.4101 }
		}
	}
}

# Alerts an empire about the strange patterns in the stars
country_event = {
	id = endtimescrisis.4101
	title = "endtimescrisis.4101.name"
	desc = "endtimescrisis.4101.desc"
	picture = GFX_evt_physics_research
	show_sound = event_alien_signal_03
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			has_global_flag = endtimes_faulty_stars
		}
		name = endtimescrisis.4101.a
		begin_event_chain = {
			event_chain = "fault_in_the_stars"
			target = ROOT
		}
	}
	option = {
		trigger = {
			AND = {
				has_country_flag = star_crazy
				NOT = { has_global_flag = endtimes_faulty_stars }
			}
		}
		name = endtimescrisis.4101.b
		begin_event_chain = {
			event_chain = "fault_in_the_stars_chain"
			target = ROOT
		}
	}
	option = {
		trigger = {
			NOR = {
				has_country_flag = star_crazy
				has_global_flag = endtimes_faulty_stars
			}
		}
		name = endtimescrisis.4101.c
		begin_event_chain = {
			event_chain = "fault_in_the_stars"
		}
	}
}

### NEUTRON STAR
# Initializes the Vultaum home system if has not already been discovered (HIDDEN)
country_event = {
	id = endtimescrisis.4002
	hide_window = yes
	fire_only_once = yes
	
	mean_time_to_happen = {
		months = 600
	}
	
	trigger = {
		is_country_type = default
		has_global_flag = endtimes_vultaum_shifting_stars
	}
	
	immediate = {
		remove_global_flag = endtimes_vultaum_shifting_stars
		set_global_flag = endtimes_vultaum_neutron_star
		set_global_flag = endtimes_faulty_stars
		
		if = {
			# Catch for if the game does not have Vultaum precursors
			limit = { 
				NOT = { any_country = { has_country_flag = vultaum_intro } }
			}
			
			# Spawns a low-value version of the Vultaum home system with Neutron Star already in place
			random_system = {
				spawn_system = {
					min_distance = 20
					max_distance = 80
					initializer = "endtimes_dep_vultaumar_system"
				}
			}
		}
		else_if = {
			# Checks if there are Vultaum precursors and whether the homeworld is discovered
			limit = {
				any_country = { has_country_flag = vultaum_intro }
				NOT = {
					any_system = { has_star_flag = vultaumar }
				}
			}
			
			# Generates Vultaum Home System
			random_system = {
				limit = { has_star_flag = precursor_1 }
				spawn_system = {
					min_distance = 20
					max_distance = 50
					initializer = "vultaumar_system"
				}
			}
			
			# Converts star to Neutron Star
			random_system = {
				limit = { has_star_flag = vultaumar }
				random_system_planet = {
					limit = { is_star = yes }
					change_pc = pc_pulsar
				}
			}
			
			# Ends the precursor chain and alerts everyone to the home system AFTER the neutron signal is observed
			set_global_flag = vultaum_system_discovered
			every_country = {
				limit = { is_country_type = default }
				add_event_chain_counter = {
					event_chain = "vultaum_chain"
					counter = "vultaum_artifacts"
					amount = 6
				}
				country_event = { id = precursor.97 days = 5 }
			}
		}
		else = {
			# Converts star to Neutron Star
			random_system = {
				limit = { has_star_flag = vultaumar }
				random_system_planet = {
					limit = { is_star = yes }
					change_pc = pc_pulsar
				}
			}
		}
		
		# Creates POI
		random_system = {
			limit = { has_star_flag = vultaumar }
			save_event_target_as = endtimes_neutron_star_evt
		}
		
		every_country = {
			limit = { is_country_type = default }
			country_event = { id = endtimescrisis.4102 }
		}
	}
}

# Alerts empires to the neutron star
country_event = {
	id = endtimescrisis.4102
	title = "endtimescrisis.4102.name"
	
	is_triggered_only = yes
	
	# Decription if there was no Vultaum precursor in the galaxy
	desc = {
		trigger = {
			NOT = {
				any_country = { has_country_flag = vultaum_intro }
			}
		}
		text = "endtimescrisis.4102.novultaum"
	}
	
	# Description if Vultaum HW was not yet discovered
	desc = {
		trigger = {
			AND = {
				NOT = { has_country_flag = vultaum_system }
				any_country = { has_country_flag = vultaum_intro }
			}
		}
		text = "endtimescrisis.4102.nohomeworld"
	}
	
	# Description if Vultaum HW already known
	desc = {
		trigger = {
			has_country_flag = vultaum_system
		}
		text = "endtimescrisis.4102.main"
	}
	
	immediate = {
		end_event_chain = { "fault_in_the_stars_chain" }
		begin_event_chain = {
			event_chain = "neutron_star_chain"
			target = ROOT
		}
		
		create_point_of_interest = {
			id = endtimes_neutronstar.1
			name = "endtimes_neutron_star_poi"
			desc = "endtimes_neutron_star_poi_desc"
			event_chain = neutron_star_chain
			location = event_target:endtimes_neutron_star_evt
		}
	}
}


## THE OUTSIDERS
# Distributes messages to all of the empires (HIDDEN)
country_event = {
	id = endtimescrisis.4003
	hide_window = yes
	fire_only_once = yes
	
	mean_time_to_happen = {
		months = 120
	}
	
	trigger = {
		is_country_type = default
		has_global_flag = endtimes_vultaum_neutron_star
	}
	
	immediate = {
		remove_global_flag = endtimes_vultaum_neutron_star
		set_global_flag = endtimes_outsiders_signal
		every_country = {
			limit = {is_country_type = default }
			country_event = { id = endtimescrisis.4103 }
		}
		every_country = {
			limit = { is_country_type = fallen_empire }
			country_event = { id = endtimesutility.0001 days = 30 }
		}
	}
}

# Message to alert empires that the Neutron Star is talking to them
country_event = {
	id = endtimescrisis.4103
	title = "endtimescrisis.4103.name"
	desc = "endtimescrisis.4103.desc"
	picture = GFX_evt_wormhole
	show_sound = event_radio_chatter
	
	is_triggered_only = yes
	
	
	option = {
		name = endtimescrisis.4103.a
		hidden_effect = {
			country_event = { id = endtimescrisis.4303 }
			country_event = { id = endtimesradiant.4100 days = 10 }
		}
	}
}

# First Diplomatic Event to Contact the Outsiders
country_event = {
	id = endtimescrisis.4303
	title = "TRANSMISSION"
	
	is_triggered_only = yes
	
	desc = {
		text = endtimescrisis.4303.desc
	}
	
	diplomatic = yes
	
	picture_event_data = {
		room = no_video_feed_room
	}
	
	option = {
		name = endtimescrisis.4303.WHOAREYOU
		response_text = endtimescrisis.4303.WEARE
		is_dialog_only = yes
	}
	option = {
		name = endtimescrisis.4303.WHATDOYOUWANT
		response_text = endtimescrisis.4303.WEWANT
		hidden_effect = {
			set_country_flag = endtimes_what_they_want
		}
		is_dialog_only = yes
	}
	option = {
		allow = {
			has_country_flag = endtimes_what_they_want
		}
		name = endtimescrisis.4303.HOW
		response_text = endtimescrisis.4303.TOOSOON
		is_dialog_only = yes
	}
	option = {
		allow = {
			has_country_flag = endtimes_what_they_want
		}
		name = endtimescrisis.4303.WHY
		response_text = endtimescrisis.4303.HERESWHY
		is_dialog_only = yes
	}
	option = {
		trigger = {
			has_authority = auth_machine_intelligence
		}
		allow = {
			has_country_flag = endtimes_what_they_want	
		}
		name = endtimescrisis.4303.ISTHEREROOM
		response_text = endtimescrisis.4303.ROOMFORALL
		is_dialog_only = yes
	}
	option = { # HERESY
		trigger = {
			OR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
			}
		}
		allow = {
			has_country_flag = endtimes_what_they_want
		}
		
		name = endtimescrisis.4303.GOODBYE.SPIR
		response_text = endtimescrisis.4303.FAREWELL
		remove_country_flag = endtimes_what_they_want
	}
	option = {
		allow = {
			has_country_flag = endtimes_what_they_want
			NOR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
			}
		}
		name = endtimescrisis.4303.GOODBYE
		response_text = endtimescrisis.4303.FAREWELL
		remove_country_flag = endtimes_what_they_want
	}
}


## THE CHOICE
country_event = {
	id = endtimescrisis.4004
	hide_window = yes
	fire_only_once = yes
	
	mean_time_to_happen = {
		months = 24
	}
	
	trigger = {
		is_country_type = default
		has_global_flag = endtimes_outsiders_signal
	}
	
	immediate = {
		remove_global_flag = endtimes_outsiders_signal
		set_global_flag = endtimes_outsiders_choice
		every_country = {
			limit = { is_country_type = default }
			country_event = { id = endtimescrisis.4104 }
		}
	
		every_country = {
			limit = { is_country_type = awakened_fallen_empire }
			country_event = { id = endtimescrisis.4204 days = 10 }
		}
	}
}

country_event = {
	id = endtimescrisis.4104
	title = "endtimescrisis.4104.name"
	desc = "endtimescrisis.4104.desc"
	picture = GFX_evt_wormhole
	show_sound = event_radio_chatter
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			NOT = { has_country_flag = endtimes_no_choice }
		}
		
		name = endtimescrisis.4104.a
		country_event = { id = endtimescrisis.4304 }
	}
	option = {
		trigger = {
			has_country_flag = endtimes_no_choice
		}
		
		name = endtimescrisis.4104.RUDE
		country_event = { id = endtimescrisis.4304 }
	}
}

country_event = { # Refires the dialog if the player exits out before choosing a side, or triggers an autoflag if the player is being obstinent
	id = endtimescrisis.4204
	hide_window = yes
	
	trigger = {
		is_country_type = default
		has_global_flag = endtimes_outsiders_choice
		NOR = {
			has_country_flag = endtimes_resistance
			has_country_flag = endtimes_cooperator
		}
	}

	immediate = {
		if = { # TODO: Need event to indicate to other empires that a new empire has come into existance and they have made a choice.
			limit = { NOT = { has_country_flag = endtimes_no_choice } }
			set_country_flag = endtimes_no_choice
			
			country_event = { id = endtimescrisis.4104 }
		}
		else = {
			remove_country_flag = endtimes_no_choice
			set_country_flag = endtimes_resistance
			
			country_event = { id = endtimescrisis.4504 }
		}
	}
}

# The Outsiders levy a choice on the empires: help them or stand aside
country_event = {
	id = endtimescrisis.4304
	title = "TRANSMISSION"
	
	is_triggered_only = yes
	
	desc = {
		trigger = {
			NOT = { has_country_flag = endtimes_no_choice }
		}
		text = endtimescrisis.4304.desc
	}
	desc = {
		trigger = {
			has_country_flag = endtimes_no_choice
		}
		text = endtimescrisis.4304.desc.RUDE
	}
	
	diplomatic = yes
	
	picture_event_data = {
		room = no_video_feed_room
	}
	
	# Yes based on ethics
	option = {
		trigger = {
			OR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
			}
		}
		name = endtimescrisis.4304.YES.SPIR
		response_text = endtimescrisis.4304.WONDERFUL
		
		set_country_flag = endtimes_cooperator
		hidden_effect = {
			end_event_chain = { "neutron_star_chain" }
			begin_event_chain = {
				event_chain = "crash_the_simulation_chain"
				target = ROOT
			}
		}
		
		ai_weight = {
			factor = 0
		}
	}
	
	# Universal YES
	option = {
		trigger = {
			NOR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
			}
		}
		name = endtimescrisis.4304.YES
		response_text = endtimescrisis.4304.WONDERFUL
		
		set_country_flag = endtimes_cooperator
		remove_country_flag = endtimes_no_choice
		
		hidden_effect = {
			end_event_chain = { "neutron_star_chain" }
			begin_event_chain = {
				event_chain = "crash_the_simulation_chain"
				target = ROOT
			}
		}
		
		ai_weight = {
			base = 50
			modifier = {
				factor = 1.5
				OR = {
					has_ethic = ethic_materialist
					has_ethic = ethic_egalitarian
					has_ethic = ethic_fanatic_egalitarian
				}
			}
			modifier = {
				factor = 2
				OR = {
					has_ethic = ethic_fanatic_materialist
					has_civic = civic_machine_assimilator
				}
			}
			modifier = {
				factor = 5
				OR = {
					has_civic = civic_machine_terminator
					has_civic = civic_fanatic_purifiers
				}
			}
			modifier = {
				factor = 0
				OR = {
					has_ethic = ethic_spititualist
					has_ethic = ethic_fanatic_spiritualist
					has_civic = civic_hive_devouring_swarm
					has_civic = civic_inwards_perfection
				}
			}
		}
	}
	
	# Universal NO
	option = {
		name = endtimescrisis.4304.NO
		response_text = endtimescrisis.4304.SADDENING
		
		set_country_flag = endtimes_resistance
		remove_country_flag = endtimes_no_choice
		
		hidden_effect = {
			end_event_chain = { "neutron_star_chain" }
			begin_event_chain = {
				event_chain = "crash_the_simulation_chain"
				target = ROOT
			}
			
			create_point_of_interest = {
				id = endtimes_neutronstar.1
				name = "endtimes_neutron_star_poi"
				desc = "endtimes_neutron_star_poi_desc"
				event_chain = crash_the_simulation_chain
				location = event_target:endtimes_neutron_star_evt
			}
		}
		
		ai_weight = {
			base = 50
			modifier = {
				factor = 1.5
				OR = {
					has_authority = auth_machine_intelligence
					has_ethic = ethic_authoritarian
					has_ethic = ethic_xenophile
					has_ethic = ethic_fanatic_xenophile
				}
			}
			modifier = {
				factor = 2
				OR = {
					has_ethic = ethic_fanatic_authoritarian
				}
			}
			modifier = {
				factor = 0
				OR = {
					
				}
			}
		}
	}
}

# Forces Awakened FEs onto sides after main empires have chosen
country_event = {
	id = endtimescrisis.4404
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { 
				OR = {
					has_ethic = ethic_fanatic_spritualist
					has_ethic = ethic_fanatic_xenophile
				}
			}
			set_country_flag = endtimes_resistance
		}
		else = {
			set_country_flag = endtimes_cooperator
		}
	}
}

country_event = { # Vultaum let the empire know that they take their silence as a statement of intent to resist
	id = endtimescrisis.4504
	title = "endtimescrisis.4504.name"
	desc = "endtimescrisis.4504.desc"
	picture = GFX_evt_physics_research
	
	is_triggered_only = yes
	
	option = {
		name = endtimescrisis.4504.a
		
		hidden_effect = {
				end_event_chain = { "neutron_star_chain" }
				begin_event_chain = {
					event_chain = "crash_the_simulation_chain"
					target = ROOT
				}
			
				create_point_of_interest = {
					id = endtimes_neutronstar.1
					name = "endtimes_neutron_star_poi"
					desc = "endtimes_neutron_star_poi_desc"
					event_chain = crash_the_simulation_chain
					location = event_target:endtimes_neutron_star_evt
				}
			}
	}
}

### Cooperator Chain
## THE PLAN
# Initializing Event that contacts the empires to explain the plan
country_event = {
	id = endtimescrisis.4005
	hide_window = yes
	fire_only_once = yes
	
	mean_time_to_happen = {
		months = 12
	}
	
	trigger = {
		has_country_flag = endtimes_cooperator
	}
	
	immediate = {
		set_global_flag = endtimes_outsiders_plan
		country_event = { id = endtimescrisis.4105 }
	}
}

# Contact Event for Default Empires
country_event = {
	id = endtimescrisis.4105
	title = "endtimescrisis.4105.name"
	desc = "endtimescrisis.4105.desc"
	picture = GFX_evt_wormhole
	show_sound = event_radio_chatter
	
	is_triggered_only = yes
	
	option = {
		name = endtimescrisis.4105.a
		hidden_effect = { country_event = { id = endtimescrisis.4305 } }
	}
}

# Catch event so the player doesn't accidentally miss the plan
country_event = {
	id = endtimescrisis.4205
	hide_window = yes
	
	trigger = {
		has_global_flag = endtimes_outsiders_plan
		has_country_flag = endtimes_cooperator
		NOT = { has_country_flag = endtimes_how_to_crash }
	}
	
	immediate = { # Go straight into the diplo screen again to avoid annoyances. EVALUATE FOR CHANGE
		country_event = { id = endtimescrisis.4305 }
	}
}

country_event = {
	id = endtimescrisis.4305
	title = "TRANSMISSION"
	desc = endtimescrisis.4305.desc
	
	is_triggered_only = yes
	
	diplomatic = yes
	
	picture_event_data = {
		room = no_video_feed_room
	}
	
	option = {
		name = endtimescrisis.4305.HOW
		response_text = endtimescrisis.4305.HERESHOW
		
		hidden_effect = {
			set_country_flag = endtimes_how_to_crash
			country_event = { id = endtimescrisis.4405 days = 1 }
		}
		is_dialog_only = yes
	}
	option = {
		name = endtimescrisis.4305.VERYWELL
		response_text = endtimescrisis.4305.WERECOUNTINGONYOU
	
		allow = {
			has_country_flag = endtimes_how_to_crash
		}
	}
}

country_event = { # Informs player that they can now build Jupiter Brains on gas giants
	id = endtimescrisis.4405
	title = "endtimescrisis.4405.name"
	desc = "endtimescrisis.4405.desc"
	
	option = {
		name = endtimescrisis.4405.a
		custom_tooltip = {
			text = endtimescrisis.4405.TT
		}
	}
}

## Events Related to the construction of Jupiter Brains
# Alerts all empires to the start of construction of a brain
country_event = {
	id = endtimescrisis.4006
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		if = { # Inelegant solution until I come up with something better. TODO: Come up with something better.
			limit = { NOT = { has_global_flag = endtimes_first_jupiter_brain_const } }
			country_event = { id = endtimescrisis.4206 days = 1 } 
		}
		
		every_country = {
			limit = { is_country_type = default }
			country_event = { id = endtimescrisis.4106 }
		}
	}
}

country_event = {
	id = endtimescrisis.4106
	title = { # Does this even work???
		trigger = { 
			has_global_flag = endtimes_first_jupiter_brain_const
			has_country_flag = endtimes_resistance
		}
		text = endtimescrisis.4106.name.FIRST
	}
	title = {
		trigger = { 
			OR = {
				NOT = { has_global_flag = endtimes_first_jupiter_brain_const }
				has_country_flag = endtimes_cooperator
			}
		}
		text = endtimescrisis.4106.name
	}
	
	desc = {
		trigger = { 
			NOT = { has_global_flag = endtimes_first_jupiter_brain_const }
			has_country_flag = endtimes_resistance
		}
		text = endtimescrisis.4106.desc.RESISTFIRST
	}
	desc = {
		trigger = { 
			NOT = { has_global_flag = endtimes_first_jupiter_brain_const }
			has_country_flag = endtimes_cooperator
		}
		text = endtimescrisis.4106.desc.COOPFIRST
	}
	desc = {
		trigger = { 
			has_global_flag = endtimes_first_jupiter_brain_const
			has_country_flag = endtimes_resistance
			NOT = { has_global_flag = endtimes_first_rift }
		}
		text = endtimescrisis.4106.desc.RESISTNORIFT
	}
	desc = {
		trigger = { 
			has_global_flag = endtimes_first_jupiter_brain_const
			has_country_flag = endtimes_resistance
			has_global_flag = endtimes_first_rift
		}
		text = endtimescrisis.4106.desc.RESIST
	}
	desc = {
		trigger = { 
			has_global_flag = endtimes_first_jupiter_brain_const
			has_country_flag = endtimes_cooperator
		}
		text = endtimescrisis.4106.desc.COOP
	}
	
	option = {
		trigger = {
			has_country_flag = endtimes_cooperator
		}
		text = endtimescrisis.4106.a
		hidden_effect = {
			endtimes_allocate_poi = yes
		}
	}
	option = {
		trigger = {
			has_country_flag = endtimes_resistance
		}
		text = endtimescrisis.4106.b
		hidden_effect = {
			endtimes_allocate_poi = yes
		}
	}
}

# Solution to setting the flag after the empires have already been alerted to the first brain
country_event = {
	id = endtimescrisis.4206
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		set_global_flag = endtimes_first_jupiter_brain_const
	}
}


# Alerts all empires to the completion of construction of a brain
country_event = {
	id = endtimescrisis.4007
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		if = { # Inelegant solution until I come up with something better. TODO: Come up with something better.
			limit = { NOT = { has_global_flag = endtimes_first_jupiter_brain } }
			country_event = { id = endtimescrisis.4207 days = 1 } 
		}
		
		every_country = {
			limit = { is_country_type = default }
			country_event = { id = endtimescrisis.4107 }
		}
		
		every_country = {
			limit = { has_event_chain = "crash_the_simulation_chain" }
			add_event_chain_counter = {
				event_chain = "crash_the_simulation_chain"
				counter = "endtimes_active_jupiter_brains"
				amount = 1
			}
		}
		
		every_country = { # Variables for tracking. Again, not ideal implemenation.
			limit = { is_country_type = global_event }
			country_event = { id = entimesutility.0003 }
		}
	}
}

country_event = {
	id = endtimescrisis.4107
	title = { # Does this even work???
		trigger = { 
			has_global_flag = endtimes_first_jupiter_brain
			has_country_flag = endtimes_resistance
		}
		text = endtimescrisis.4107.name.FIRST
	}
	title = {
		trigger = { 
			OR = {
				NOT = { has_global_flag = endtimes_first_jupiter_brain }
				has_country_flag = endtimes_cooperator
			}
		}
		text = endtimescrisis.4107.name
	}
	
	desc = {
		trigger = { 
			has_global_flag = endtimes_first_jupiter_brain
			has_country_flag = endtimes_resistance
		}
		text = endtimescrisis.4107.desc.RESISTFIRST
	}
	desc = {
		trigger = { 
			has_global_flag = endtimes_first_jupiter_brain
			has_country_flag = endtimes_cooperator
		}
		text = endtimescrisis.4107.desc.COOPFIRST
	}
	desc = {
		trigger = { 
			has_global_flag = endtimes_first_jupiter_brain
			has_country_flag = endtimes_resistance
			NOT = { has_global_flag = endtimes_first_rift }
		}
		text = endtimescrisis.4107.desc.RESISTNORIFT
	}
	desc = {
		trigger = { 
			has_global_flag = endtimes_first_jupiter_brain
			has_country_flag = endtimes_resistance
			has_global_flag = endtimes_first_rift
		}
		text = endtimescrisis.4107.desc.RESIST
	}
	desc = {
		trigger = { 
			NOT = { has_global_flag = endtimes_first_jupiter_brain }
			has_country_flag = endtimes_cooperator
		}
		text = endtimescrisis.4107.desc.COOP
	}
	
	option = {
		trigger = {
			has_country_flag = endtimes_cooperator
		}
		text = endtimescrisis.4107.a
		
		hidden_effect = { 
		#	endtimes_allocate_poi = yes
			add_event_chain_counter = {
				event_chain = "crash_the_simulation_chain"
				counter = "endtimes_active_jupiter_brains"
				amount = 1
			}
		}
	}
	option = {
		trigger = {
			has_country_flag = endtimes_resistance
		}
		text = endtimescrisis.4107.b
		
		hidden_effect = {
		#	endtimes_allocate_poi = yes
			add_event_chain_counter = {
				event_chain = "crash_the_simulation_chain"
				counter = "endtimes_active_jupiter_brains"
				amount = 1
			}
		}
	}
}

# Solution to setting the flag after the empires have already been alerted to the first brain
country_event = {
	id = endtimescrisis.4207
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		set_global_flag = endtimes_first_jupiter_brain
	}
}




### Resistance Chain


## Events Related to destruction of Jupiter Brains
# TODO














































